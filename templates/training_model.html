{% extends 'Base_form.html' %}
{% block content %}
        {% load static %}
        <div id="container2" class="container"> 
            <table class="table">
                <thead class="thead-dark">
                <tr>
                    <th scope="col">Palabra</th>
                    <th scope="col">Estado modelo</th>
                    <th scope="col">Acciones</th>
                </tr>
                </thead>
                <tbody>
                {% for item in data %}
                    <tr>
                        <td>{{ item.word }}</td>
                        <td>
                            {% if item.state %}
                                Entrenado
                            {% else %}
                                No Entrenado
                            {% endif %}
                        </td>
                        <td>
                            <form method="POST" action="{% url 'core:eliminar_keypoint' item.word %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% if is_paginated %}
       <div class="card-footer">
         <nav aria-label="Demo of disable class">
            <ul class="pagination justify-content-center flex-wrap">
               {% if page_obj.has_previous %}
                  <li class="page-item">
                     <a
                        href="?page={{ page_obj.previous_page_number }}{{ to_paginate_query }}"
                        class="page-link text-primary fw-bolder"
                     >
                        &laquo; Atrás
                     </a>
                  </li>

                  <li class="page-item">
                     <a href="?page=1{{ to_paginate_query }}" class="page-link text-primary fw-bolder">Inicio</a>
                  </li>
               {% else %}
                  <li class="page-item disabled" style="pointer-events:none; line-height: 1.5">
                     <a class="page-link bg-secondary bg-opacity-10">&laquo; Atrás</a>
                  </li>
                  <li class="page-item disabled" style="pointer-events:none">
                     <a href="#" class="page-link bg-secondary bg-opacity-10">Inicio</a>
                  </li>
               {% endif %}

               {% for index_paginate in paginator.page_range %}
                  {% if index_paginate <= page_obj.number|add:8 and index_paginate >= page_obj.number|add:-8 %}
                     {% if page_obj.number == index_paginate %}
                        <li class="page-item active" style="pointer-events:none">
                           <a href="#" class="page-link text-dark fw-bolder">{{ forloop.counter }}</a>
                        </li>
                     {% else %}
                        <li class="page-item">
                           <a href="?page={{ forloop.counter }}{{ to_paginate_query }}"
                              class="page-link text-dark-opacity-5">{{ forloop.counter }}</a>
                        </li>
                     {% endif %}
                  {% endif %}
               {% endfor %}

               {% if page_obj.has_next %}
                  <li class="page-item">
                     <a
                        href="?page={{ page_obj.paginator.num_pages }}{{ to_paginate_query }}"
                        class="page-link text-primary"
                     >
                        Final {{ paginator.page_range.stop|add:-1 }}
                     </a>
                  </li>

                  <li class="page-item">
                     <a href="?page={{ page_obj.next_page_number }}{{ to_paginate_query }}"
                        class="page-link text-primary">Siguiente &raquo;</a>
                  </li>
               {% else %}
                  <li class="page-item disabled text-primary" style="pointer-events:none">
                     <a href="#" class="page-link bg-secondary bg-opacity-10 text-primary">Final</a>
                  </li>
                  <li class="page-item disabled" style="pointer-events:none">
                     <a class="page-link bg-secondary bg-opacity-10 text-primary">Siguiente &raquo;</a>
                  </li>
               {% endif %}
            </ul>
         </nav>
       </div>
      {% endif %}
            <div class="botones">
                <button id="training_model" >Entrenar Modelo</button>
            </div>
        </div>
        <div id="navigation-buttons">
            <a id="btn-left" class="btn btn-dark" href="{% url 'core:obtencion_puntos_clave' %}" role="button"> 
                <i class="bi bi-arrow-left"></i> Obtener Keypoints  
            </a>
            <a id="btn-right" class="btn btn-dark" href="{% url 'core:entrenamiento' %}" role="button"> 
                Capturar Frames <i class="bi bi-arrow-right"></i> 
            </a>
        </div>

        <div id="loading-screen" style= 'display: none;'>
            <div>
               <p>Entrenando el modelo, por favor espera...</p>
               <div class="spinner"></div>
            </div>
         </div>
        
        <script src="/static/js/fetch.js"></script>
        <script src="/static/js/training_model.js"></script>
{% endblock %}